(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),l=n(12),u=n(2),s=n(3),c=n.n(s),m="/api/persons",d={create:function(e){return c.a.post(m,e)},remove:function(e){return c.a.delete("".concat(m,"/").concat(e))},getAll:function(){return c.a.get(m)},edit:function(e,t){return c.a.put("".concat(m,"/").concat(e),t)}},f=function(e){var t=e.persons,n=e.filterValue,a=e.setPersons,o=e.setMessage,i=e.setError,l=e.personService,u=t.filter(function(e){return e.name.toUpperCase().includes(n.toUpperCase())}).map(function(e){return r.a.createElement("li",{key:e.name},e.name," ",e.number,r.a.createElement(b,{personService:l,setMessage:o,person:e,persons:t,setPersons:a,setError:i}))});return r.a.createElement("div",null,r.a.createElement("ul",null,u))},p=function(e){var t=e.error?h.errorNotificationStyles:h.notificationStyles;return console.log("error value passed as prop ",e.error),null===e.message?null:r.a.createElement("div",{style:t}," ",e.message," ")},b=function(e){return r.a.createElement("button",{onClick:function(){window.confirm("Haluatko varmasti poistaa henkil\xf6n luettelosta?")&&d.remove(e.person.id).then(function(t){var n=e.persons.filter(function(t){return t.id!==e.person.id});e.setMessage("".concat(e.person.name," poistettiin onnistuneesti")),e.setError(!1),setTimeout(function(){e.setMessage(null)},5e3),e.setPersons(n)}).catch(function(t){e.setMessage("Henkil\xf6 ".concat(e.person.name," oli jo poistettu")),setTimeout(function(){e.setMessage(null)},5e3),e.personService.getAll().then(function(t){e.setPersons(t.data)}),e.setError(!0)})}},"poista")},g=function(e){return r.a.createElement("div",null,r.a.createElement("input",{value:e.filterValue,onChange:e.handleFilterChange}))},v=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.addName},r.a.createElement("div",null,"nimi:",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"numero:",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},E=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1];Object(a.useEffect)(function(){d.getAll().then(function(e){o(e.data)})},[]);var i=Object(a.useState)(""),s=Object(u.a)(i,2),c=s[0],m=s[1],b=Object(a.useState)(""),E=Object(u.a)(b,2),h=E[0],j=E[1],k=Object(a.useState)(""),S=Object(u.a)(k,2),w=S[0],C=S[1],O=Object(a.useState)(null),N=Object(u.a)(O,2),y=N[0],x=N[1],M=Object(a.useState)(!1),P=Object(u.a)(M,2),T=P[0],A=P[1];console.log(T,"initialised as");return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(p,{message:y,error:T}),r.a.createElement(g,{handleFilterChange:function(e){C(e.target.value)},filterValue:w}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement(v,{addName:function(e){if(e.preventDefault(),n.some(function(e){return e.name===c})){var t=n.find(function(e){return e.name===c}),a=t.id;if(t.number===h)A(!0),x("".concat(c," on jo luettelossa")),setTimeout(function(){x(null)},5e3);else if(window.confirm("".concat(c," on jo luettelossa, korvataanko vanha numero uudella?"))){var r=Object(l.a)({},t,{number:h});d.edit(a,r).then(function(e){o(n.map(function(t){return t.id!==a?t:e.data})),x("Henkil\xf6n ".concat(e.data.name," tiedot muutettiin onnistuneesti")),A(!1),setTimeout(function(){x(null)},5e3)}).catch(function(e){x("Henkil\xf6 ".concat(r.name," oli jo poistettu")),d.getAll().then(function(e){o(e.data)}),setTimeout(function(){x(null)},5e3),A(!0)})}}else d.create({name:c,number:h}).then(function(e){o(n.concat(e.data)),x("Lis\xe4ttiin ".concat(e.data.name," onnistuneesti ")),A(!1),setTimeout(function(){x(null)},5e3)})},handleNameChange:function(e){m(e.target.value)},newName:c,newNumber:h,handleNumberChange:function(e){j(e.target.value)}}),r.a.createElement("h3",null,"Numerot"),r.a.createElement(f,{persons:n,filterValue:w,setPersons:o,setMessage:x,setError:A,personService:d}))},h={notificationStyles:{display:"inline-block",padding:"20px",border:"1px solid green",borderRadius:"20px",backgroundColor:"#6161612b",marginBottom:"20px"},errorNotificationStyles:{display:"inline-block",padding:"20px",border:"1px solid red",borderRadius:"20px",backgroundColor:"#6161612b",marginBottom:"20px"}};i.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.41377485.chunk.js.map